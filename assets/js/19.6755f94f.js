(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{368:function(a,s,t){"use strict";t.r(s);var n=t(43),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"mrapi-api-配置项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mrapi-api-配置项"}},[a._v("#")]),a._v(" @mrapi/api 配置项")]),a._v(" "),t("p",[a._v("\b 当前配置仅提供给 "),t("code",[a._v("@mrapi/api")]),a._v(" 使用。")]),a._v(" "),t("p",[t("strong",[a._v("注意: 请先查看 "),t("a",{attrs:{href:"https://mrapi-js.github.io/docs/zh/Configuration/Common.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("mrapi 整体配置项说明"),t("OutboundLink")],1)])]),a._v(" "),t("h2",{attrs:{id:"参数说明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参数说明"}},[a._v("#")]),a._v(" 参数说明")]),a._v(" "),t("div",{staticClass:"language-ts line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-ts"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api config")]),a._v("\napi"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api openapi config")]),a._v("\n  openapi"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api openapi custom api dir")]),a._v("\n    dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/src/openapi'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api openapi custom api preifx")]),a._v("\n    prefix"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/api'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api graphql config")]),a._v("\n  graphql"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api graphql custom api dir")]),a._v("\n    dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/src/graphql'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api graphql api prefix")]),a._v("\n    path"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'/graphql'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api graphql playground")]),a._v("\n    playground"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'playground'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api graphql sources")]),a._v("\n    sources"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api server config")]),a._v("\n  server"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api server listen port")]),a._v("\n    port"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1358")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api server type")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("type")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'standalone'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api fastify server options")]),a._v("\n    options"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// @mrapi/api prisma schema names array")]),a._v("\n  schemaNames"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// auto run scripts mrapi generate")]),a._v("\n  autoGenerate"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[a._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// mrapi db choose header key")]),a._v("\n  schemaIdentity"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'mrapi-schema'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br"),t("span",{staticClass:"line-number"},[a._v("27")]),t("br"),t("span",{staticClass:"line-number"},[a._v("28")]),t("br"),t("span",{staticClass:"line-number"},[a._v("29")]),t("br"),t("span",{staticClass:"line-number"},[a._v("30")]),t("br"),t("span",{staticClass:"line-number"},[a._v("31")]),t("br"),t("span",{staticClass:"line-number"},[a._v("32")]),t("br"),t("span",{staticClass:"line-number"},[a._v("33")]),t("br"),t("span",{staticClass:"line-number"},[a._v("34")]),t("br"),t("span",{staticClass:"line-number"},[a._v("35")]),t("br"),t("span",{staticClass:"line-number"},[a._v("36")]),t("br"),t("span",{staticClass:"line-number"},[a._v("37")]),t("br"),t("span",{staticClass:"line-number"},[a._v("38")]),t("br")])]),t("ul",[t("li",[t("code",[a._v("tenantIdentity")]),a._v(": String.默认值"),t("code",[a._v("mrapi-pmt")]),a._v(" 多租户在 header 中的 key 值")]),a._v(" "),t("li",[t("code",[a._v("api")]),a._v(": Object. api 包配置")]),a._v(" "),t("li",[t("code",[a._v("api.schemaNames")]),a._v(": Array.默认值"),t("code",[a._v("[]")]),a._v("type 为"),t("code",[a._v("combined")]),a._v("时需要加载的 schema 名称")]),a._v(" "),t("li",[t("code",[a._v("api.autoGenerate")]),a._v(": Boolean.默认值"),t("code",[a._v("true")]),a._v(",是否根据根据"),t("code",[a._v("api.schemaNames")]),a._v("自定执行"),t("code",[a._v("npx mrapi generate")]),a._v("脚本(生产环境建议开启，开发环境在 db 变更后开启)")]),a._v(" "),t("li",[t("code",[a._v("api.schemaIdentity")]),a._v(": String.默认值"),t("code",[a._v("mrapi-db")]),a._v(",dal 结合使用下，自定义 openapi 中 db 选择的 header key")]),a._v(" "),t("li",[t("code",[a._v("api.openapi")]),a._v(": Object. openapi 相关配置")]),a._v(" "),t("li",[t("code",[a._v("api.openapi.dir")]),a._v(": String.默认值"),t("code",[a._v("/src/openapi")]),a._v("自定义 openapi 存放目录")]),a._v(" "),t("li",[t("code",[a._v("api.openapi.prefix")]),a._v(": String.默认值"),t("code",[a._v("/api")]),a._v("自定义 openapi 路由前缀")]),a._v(" "),t("li",[t("code",[a._v("api.graphql")]),a._v(": Object. graphql 相关配置")]),a._v(" "),t("li",[t("code",[a._v("api.graphql.dir")]),a._v(": String. 默认值"),t("code",[a._v("/src/graphql")]),a._v("自定义 graphql 文件目录")]),a._v(" "),t("li",[t("code",[a._v("api.graphql.path")]),a._v(": String. 默认值"),t("code",[a._v("/graphql")]),a._v("graphql 访问路径,真实访问路径为"),t("code",[a._v("${api.graphql.path}/:${schemaName}")]),a._v(",正则匹配 schemaName(决定 handler 上下文中的 prismaClient，"),t("code",[a._v("standlone")]),a._v("模式使用时"),t("code",[a._v("${schemaName}")]),a._v("请传"),t("code",[a._v("default")]),a._v("，确保路由能被命中)")]),a._v(" "),t("li",[t("code",[a._v("api.graphql.palyground")]),a._v(": String|Boolean. 默认值"),t("code",[a._v("palyground")]),a._v("graphql palyground 地址，如果"),t("code",[a._v("false")]),a._v("则是关闭 playground")]),a._v(" "),t("li",[t("code",[a._v("api.graphql.sources")]),a._v(": Array. 默认值"),t("code",[a._v("[]")]),a._v("需要 mesh 的 graphql 源配置")]),a._v(" "),t("li",[t("code",[a._v("api.server")]),a._v(": Object. server 服务相关配置")]),a._v(" "),t("li",[t("code",[a._v("api.server.port")]),a._v(": Number. 默认值"),t("code",[a._v("1358")]),a._v("服务监听端口")]),a._v(" "),t("li",[t("code",[a._v("api.server.type")]),a._v(": String. 默认值"),t("code",[a._v("standalone")]),a._v("enum['standalone','combined']api 包使用模式['单独使用','结合 dal 使用']")]),a._v(" "),t("li",[t("code",[a._v("api.server.options")]),a._v(": Object.默认值"),t("code",[a._v("{}")]),a._v("透传给 fastify 的 options")])])])}),[],!1,null,null,null);s.default=e.exports}}]);