(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{354:function(t,s,a){"use strict";a.r(s);var e=a(43),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"mrapi-api-usage-documentation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mrapi-api-usage-documentation"}},[t._v("#")]),t._v(" @mrapi/api usage documentation")]),t._v(" "),a("p",[a("code",[t._v("@mrapi/api")]),t._v(" serves as the API layer to directly provide services to the client, which can aggregate other "),a("code",[t._v("openapi/graphql")]),t._v(" interfaces and operate the database through "),a("code",[t._v("prisma")]),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"core"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#core"}},[t._v("#")]),t._v(" core")]),t._v(" "),a("ul",[a("li",[t._v("Log multi-terminal (file + terminal) output, automatic division")])]),t._v(" "),a("ul",{staticClass:"contains-task-list"},[a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),t._v(" "),a("code",[t._v("standalone")]),t._v(" mode\n"),a("ul",{staticClass:"contains-task-list"},[a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),t._v(" Aggregate "),a("code",[t._v("graphql")]),t._v(" interface")]),t._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),t._v(" Custom "),a("code",[t._v("graphql")]),t._v(" interface")]),t._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),t._v(" Proxy "),a("code",[t._v("openapiy")]),t._v(" interface")]),t._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),t._v(" Custom "),a("code",[t._v("openapi")]),t._v(" interface")])])]),t._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),t._v(" "),a("code",[t._v("combined")]),t._v(" mode\n"),a("ul",{staticClass:"contains-task-list"},[a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),t._v(" Expose the "),a("code",[t._v("dal")]),t._v(" CRUD "),a("code",[t._v("graphql")]),t._v(" interface")]),t._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),t._v(" Custom "),a("code",[t._v("graphql")]),t._v(" interface (using "),a("code",[t._v("prisma")]),t._v(" instance)")]),t._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox"}}),t._v(" Expose the "),a("code",[t._v("dal")]),t._v(" CRUD "),a("code",[t._v("openapi")]),t._v(" interface")]),t._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),t._v(" Custom "),a("code",[t._v("openapi")]),t._v(" interface (using "),a("code",[t._v("prisma")]),t._v(" instance)")])])])]),t._v(" "),a("h2",{attrs:{id:"install"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install"}},[t._v("#")]),t._v(" install")]),t._v(" "),a("div",{staticClass:"language-terminal line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm install @mrapi/api --save\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"standalone-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#standalone-mode"}},[t._v("#")]),t._v(" "),a("code",[t._v("standalone")]),t._v(" mode")]),t._v(" "),a("ul",[a("li",[t._v("Reference "),a("a",{attrs:{href:"https://github.com/mrapi-js/mrapi/tree/docs-v1/examples/api-basic",target:"_blank",rel:"noopener noreferrer"}},[t._v("api-basic"),a("OutboundLink")],1),t._v(" project")]),t._v(" "),a("li",[a("strong",[t._v("Note: Does not provide database operation capabilities")])])]),t._v(" "),a("h3",{attrs:{id:"first-configure-the-basic-configuration-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#first-configure-the-basic-configuration-file"}},[t._v("#")]),t._v(" First, configure the basic configuration file")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// config/mrapi.config.js")]),t._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  api"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    openapi"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      dalBaseUrl"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://ip OR domains'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// openapi代理目的地地址")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    graphql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      sources"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'graphqlSourceName'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          endpoint"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://ip OR domains'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 源graphql服务地址")]),t._v("\n          prefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'prefix_'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// graphql operationName前缀")]),t._v("\n          snapshot"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求graphql快照")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("p",[a("strong",[t._v("Note: For other configuration items, please refer to "),a("a",{attrs:{href:"https://mrapi-js.github.io/docs/Configuration/API.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("API configuration"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"second-start-the-api-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#second-start-the-api-service"}},[t._v("#")]),t._v(" Second, start the API service")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" log "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@mrapi/api'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" api "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Api")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h3",{attrs:{id:"third-access-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#third-access-service"}},[t._v("#")]),t._v(" Third, Access service")]),t._v(" "),a("div",{staticClass:"language-terminal line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Server listening at http://127.0.0.1:1358\n# access playground http://127.0.0.1:1358/playground\n# access graphql http://127.0.0.1:1358/graphql/default\n# access custom openapi http://127.0.0.1:1358/api/xx\n# For other routes, please check the terminal print Routes Tree\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h2",{attrs:{id:"combined-mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#combined-mode"}},[t._v("#")]),t._v(" "),a("code",[t._v("combined")]),t._v(" mode")]),t._v(" "),a("ul",[a("li",[t._v("Reference "),a("a",{attrs:{href:"https://github.com/mrapi-js/mrapi/tree/docs-v1/examples/api-combine",target:"_blank",rel:"noopener noreferrer"}},[t._v("api-combine"),a("OutboundLink")],1),t._v(" project")]),t._v(" "),a("li",[a("strong",[t._v("Note: "),a("code",[t._v("Graphql-mesh")]),t._v(" and "),a("code",[t._v("openapi proxy")]),t._v(" capabilities are not provided")])]),t._v(" "),a("li",[t._v("Carry tenant information through "),a("code",[t._v("headers['mrapi-pmt']")]),t._v(", and change the key value through "),a("code",[t._v("tenantIdentity")]),t._v(" in "),a("code",[t._v("mrapi.config.js")])]),t._v(" "),a("li",[a("strong",[t._v("Select the schema")]),t._v(" "),a("code",[t._v("graphql")]),t._v(" interface and use "),a("code",[t._v("/graphql/:schemaName")]),t._v(" to determine which schema corresponds to the "),a("code",[t._v("prismaClient")]),t._v(", and the "),a("code",[t._v("/graphql")]),t._v(" prefix can be modified through "),a("code",[t._v("api.graphql.path")])]),t._v(" "),a("li",[a("strong",[t._v("Select the schema")]),t._v(" "),a("code",[t._v("openapi")]),t._v(" interface and use "),a("code",[t._v("headers['mrapi-schema']")]),t._v(" to determine which schema corresponds to the "),a("code",[t._v("prismaClient")]),t._v(". You can change the key value through "),a("code",[t._v("api.schemaIdentity")]),t._v(" in "),a("code",[t._v("mrapi.config.js")])])]),t._v(" "),a("h3",{attrs:{id:"first-configure-the-basic-configuration-file-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#first-configure-the-basic-configuration-file-2"}},[t._v("#")]),t._v(" First, Configure the basic configuration file")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// config/mrapi.config.js")]),t._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  managementUrl"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql://root:123456@127.0.0.1/management'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  api"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    schemaNames"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'one'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// prisma schema names")]),t._v("\n    server"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      type"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'combined'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[a("strong",[t._v("Note: For other configuration items, please refer to "),a("a",{attrs:{href:"https://mrapi-js.github.io/docs/Configuration/API.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("API configuration"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"second-configuration-before-startup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#second-configuration-before-startup"}},[t._v("#")]),t._v(" Second, Configuration before startup")]),t._v(" "),a("p",[t._v("Please refer to the "),a("a",{attrs:{href:"https://mrapi-js.github.io/docs/Configuration/DAL.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("DAL document"),a("OutboundLink")],1),t._v(" and configure "),a("code",[t._v("prisma")]),t._v(" related dependent files and configuration items, otherwise it may cause startup failure")]),t._v(" "),a("h3",{attrs:{id:"third-start-api-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#third-start-api-service"}},[t._v("#")]),t._v(" Third, Start API service")]),t._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" log "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@mrapi/api'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" api "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Api")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("h3",{attrs:{id:"fourth-access-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fourth-access-service"}},[t._v("#")]),t._v(" Fourth, Access service")]),t._v(" "),a("div",{staticClass:"language-terminal line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Server listening at http://127.0.0.1:1358\n# access playground http://127.0.0.1:1358/playground\n# access graphql http://127.0.0.1:1358/graphql/default\n# access custom openapi http://127.0.0.1:1358/api/xx\n# For other routes, please check the terminal print Routes Tree\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("h3",{attrs:{id:"tips"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tips"}},[t._v("#")]),t._v(" Tips")]),t._v(" "),a("ul",[a("li",[t._v("For custom extensions of "),a("code",[t._v("Fastify Server")]),t._v(" instances, you can add them by calling "),a("code",[t._v("api.server.xxx")]),t._v("after the "),a("code",[t._v("@mrapi/api")]),t._v(" instance is created and before "),a("code",[t._v("api.start()")])]),t._v(" "),a("li",[a("code",[t._v("@mrapi/api")]),t._v(" exposes the "),a("code",[t._v("log")]),t._v(" instance, which can be used in the service (refer to "),a("code",[t._v("pino")]),t._v("). The log will be printed on the terminal and recorded on the disk at the same time, and provide the ability to split")]),t._v(" "),a("li",[t._v("Customize the openapi interface in the "),a("code",[t._v("${root}/src/openap")]),t._v("i directory, please refer to the "),a("code",[t._v("fastify route")]),t._v(" documentation")]),t._v(" "),a("li",[t._v("Customize the graphql interface in the "),a("code",[t._v("${root}/src/graphql")]),t._v(" directory, please refer to "),a("code",[t._v("graphql nexus")]),t._v(" related documents")]),t._v(" "),a("li",[t._v("In "),a("code",[t._v("standalone")]),t._v(" mode, "),a("code",[t._v("execute")]),t._v(" method is injected into the context of custom "),a("code",[t._v("graphql/openapi handler")]),t._v(", which can be used to call aggregate "),a("code",[t._v("graphql")]),t._v(" service")])])])}),[],!1,null,null,null);s.default=n.exports}}]);