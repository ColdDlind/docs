(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{370:function(t,s,a){"use strict";a.r(s);var n=a(43),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"mrapi-config-js-配置说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mrapi-config-js-配置说明"}},[t._v("#")]),t._v(" mrapi.config.js 配置说明")]),t._v(" "),a("p",[a("code",[t._v("mrapi")]),t._v(" 将取用环境变量 "),a("code",[t._v("process.env.MRAPICONFIG_PATH")]),t._v(" 作为配置的读取路径，当环境变量不存在时默认填充 "),a("code",[t._v("config/mrapi.config.js")]),t._v(" 作为地址。")]),t._v(" "),a("h2",{attrs:{id:"参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参数说明"}},[t._v("#")]),t._v(" 参数说明")]),t._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" defaultConfig"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" MrapiConfig "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .env filePath")]),t._v("\n  envPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'config/.env'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// management pmt db uri")]),t._v("\n  managementUrl"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// input schema file to generate")]),t._v("\n  inputSchemaDir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'config/prisma'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// schema directory")]),t._v("\n  schemaDir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'prisma'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// output directory （cnt and pmt）")]),t._v("\n  outputDir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node_modules/.prisma-mrapi'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// multi-tenant identification (use in HTTP Request Header)")]),t._v("\n  tenantIdentity"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mrapi-pmt'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @mrapi/dal config")]),t._v("\n  dal"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// @mrapi/api config")]),t._v("\n  api"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br")])]),a("h3",{attrs:{id:"managementurl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#managementurl"}},[t._v("#")]),t._v(" managementUrl")]),t._v(" "),a("p",[t._v("多租户管理表的数据库连接地址")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("必填")])]),t._v(" "),a("li",[a("p",[t._v("参数类型："),a("code",[t._v("string")])])]),t._v(" "),a("li",[a("p",[t._v("默认值："),a("code",[t._v('""')])])])]),t._v(" "),a("h3",{attrs:{id:"inputschemadir"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#inputschemadir"}},[t._v("#")]),t._v(" inputSchemaDir")]),t._v(" "),a("p",[t._v("需要 mrapi 处理的 "),a("code",[t._v("prisma.schema")]),t._v(" 文件的目录")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("参数类型："),a("code",[t._v("string")])])]),t._v(" "),a("li",[a("p",[t._v("默认值："),a("code",[t._v('"config/prisma"')])])])]),t._v(" "),a("h3",{attrs:{id:"schemadir"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#schemadir"}},[t._v("#")]),t._v(" schemaDir")]),t._v(" "),a("p",[t._v("\b 完备合规的 "),a("code",[t._v("prisma.schema")]),t._v(" 文件的目录")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("参数类型："),a("code",[t._v("string")])])]),t._v(" "),a("li",[a("p",[t._v("默认值："),a("code",[t._v('"prisma"')])])])]),t._v(" "),a("p",[a("strong",[t._v("注意: 通过 mrapi 处理后的 inputSchemaDir 中的文件会最终输出在此目录中，文件名与源文件一致")])]),t._v(" "),a("h3",{attrs:{id:"outputdir"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#outputdir"}},[t._v("#")]),t._v(" outputDir")]),t._v(" "),a("p",[t._v("一些重要文件的统一输出目录，如："),a("code",[t._v("prisma client")]),t._v(" 、 "),a("code",[t._v("nexus type")]),t._v(" 、 "),a("code",[t._v("oas")]),t._v(" 等")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("参数类型："),a("code",[t._v("string")])])]),t._v(" "),a("li",[a("p",[t._v("默认值："),a("code",[t._v('"node_modules/.prisma-mrapi"')])])])]),t._v(" "),a("h3",{attrs:{id:"tenantidentity"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tenantidentity"}},[t._v("#")]),t._v(" tenantIdentity")]),t._v(" "),a("p",[t._v("协议中的多租户标识 KEY")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("参数类型："),a("code",[t._v("string")])])]),t._v(" "),a("li",[a("p",[t._v("默认值："),a("code",[t._v('"mrapi-pmt"')])])])]),t._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如 `HTTP` 中，设置 HEADER")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("tenantIdentity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dev'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 将会启用 management db 中的 dev 项生成对应的租户来响应用户的请求")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h3",{attrs:{id:"envpath"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#envpath"}},[t._v("#")]),t._v(" envPath")]),t._v(" "),a("p",[a("code",[t._v(".env")]),t._v(" 环境变量文件路径")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("参数类型："),a("code",[t._v("string")])])]),t._v(" "),a("li",[a("p",[t._v("默认值："),a("code",[t._v('"config/.env"')])])])]),t._v(" "),a("p",[a("strong",[t._v("注意: 当前不推荐使用此配置进行环境变量的设置，后续版本打算移除。")])]),t._v(" "),a("h3",{attrs:{id:"dal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dal"}},[t._v("#")]),t._v(" dal")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/zh/Configuration/DAL.zh-CN.html"}},[t._v("@mrapi/dal 配置项")])],1),t._v(" "),a("h3",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" api")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/zh/Configuration/API.zh-CN.html"}},[t._v("@mrapi/api 配置项")])],1)])}),[],!1,null,null,null);s.default=e.exports}}]);