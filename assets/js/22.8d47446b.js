(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{372:function(s,t,a){"use strict";a.r(t);var n=a(43),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"mrapi-dal-ä½¿ç”¨æ–‡æ¡£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mrapi-dal-ä½¿ç”¨æ–‡æ¡£"}},[s._v("#")]),s._v(" @mrapi/dal ä½¿ç”¨æ–‡æ¡£")]),s._v(" "),a("p",[s._v("DAL æ˜¯åŸºäº "),a("a",{attrs:{href:"https://www.prisma.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("prisma 2"),a("OutboundLink")],1),s._v(" çš„ä¸Šå±‚åº”ç”¨æ¡†æ¶ã€‚æˆ‘ä»¬è‡´åŠ›äºå¿«é€Ÿç”Ÿæˆæ ‡å‡†åŒ– CURD æœåŠ¡ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¤Ÿåœ¨ä¸åŒç§Ÿæˆ·å’Œä¸åŒåœºæ™¯ä¸‹è¿›è¡Œçµæ´»åˆ‡æ¢ã€‚")]),s._v(" "),a("h2",{attrs:{id:"æ ¸å¿ƒèƒ½åŠ›"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#æ ¸å¿ƒèƒ½åŠ›"}},[s._v("#")]),s._v(" æ ¸å¿ƒèƒ½åŠ›")]),s._v(" "),a("ul",{staticClass:"contains-task-list"},[a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),s._v(" å¤šç§Ÿæˆ·æ”¯æŒ")]),s._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),s._v(" å¤š prisma å®ä¾‹æ”¯æŒ")]),s._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),s._v(" æ•°æ®åº“æ”¯æŒ\n"),a("ul",{staticClass:"contains-task-list"},[a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),s._v(" PostgreSQL")]),s._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),s._v(" MySQL")]),s._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),s._v(" SQLite")])])]),s._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox"}}),s._v(" æ•°æ®ç¼“å­˜")]),s._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox"}}),s._v(" å¤šåè®®è°ƒç”¨ï¼š\n"),a("ul",{staticClass:"contains-task-list"},[a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),s._v(" prismaClient")]),s._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),s._v(" graphql")]),s._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",type:"checkbox"}}),s._v(" openAPI")]),s._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox"}}),s._v(" gRPC")])])]),s._v(" "),a("li",{staticClass:"task-list-item enabled"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{type:"checkbox"}}),s._v(" æœåŠ¡æ¥å…¥ï¼ˆæ—¥å¿—ã€ç›‘æ§ã€é¢‘æ§ç­‰ï¼‰")])]),s._v(" "),a("h2",{attrs:{id:"å®‰è£…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…"}},[s._v("#")]),s._v(" å®‰è£…")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" @mrapi/dal --save\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"å¦‚ä½•ä½¿ç”¨"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•ä½¿ç”¨"}},[s._v("#")]),s._v(" å¦‚ä½•ä½¿ç”¨")]),s._v(" "),a("p",[s._v("å½“å‰ä»¥æœ€å¸¸è§çš„ä½¿ç”¨æ–¹å¼ä¸ºä¾‹ï¼ŒHTTP Serverã€‚")]),s._v(" "),a("h3",{attrs:{id:"ä¸€ã€é…ç½®åŸºç¡€é…ç½®æ–‡ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€é…ç½®åŸºç¡€é…ç½®æ–‡ä»¶"}},[s._v("#")]),s._v(" ä¸€ã€é…ç½®åŸºç¡€é…ç½®æ–‡ä»¶")]),s._v(" "),a("p",[s._v("åœ¨é»˜è®¤é…ç½®æ–‡ä»¶ä¸‹æ·»åŠ ä¾èµ–é¡¹ "),a("code",[s._v('"managementUrl"')])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// config/mrapi.config.js")]),s._v("\nexports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  managementUrl"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file:config/db/management.db'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("æ³¨æ„: å…¶ä»–é…ç½®é¡¹è¯·å‚è€ƒ "),a("a",{attrs:{href:"https://mrapi-js.github.io/docs/zh/Configuration/DAL.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("DAL é…ç½®é¡¹"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"äºŒã€ä¸ºåˆå§‹åŒ–åšå‡†å¤‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€ä¸ºåˆå§‹åŒ–åšå‡†å¤‡"}},[s._v("#")]),s._v(" äºŒã€ä¸ºåˆå§‹åŒ–åšå‡†å¤‡")]),s._v(" "),a("p",[s._v("é…ç½® DALOptions ï¼ˆé…ç½®çš„è¿‡ç¨‹å¯èƒ½éœ€è¦ç”¨åˆ° "),a("a",{attrs:{href:"https://mrapi-js.github.io/docs/zh/CLI.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("@mrapi/cli"),a("OutboundLink")],1),s._v("ï¼‰")]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" DALOptions "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@mrapi/dal/lib/types'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" DALOptions "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'one'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    defaultTenant"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file:../config/db/dev.db'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é»˜è®¤ç§Ÿæˆ·ä¸ºæ­¤ db")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'two'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    defaultTenant"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'file:../config/db/prod.db'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é»˜è®¤ç§Ÿæˆ·ä¸ºæ­¤ db")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'three'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    defaultTenant"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é»˜è®¤ç§Ÿæˆ·ä¸º management è¡¨ä¸­æ ‡è¯†ä¸º dev çš„ db")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    openAPI"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      enable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä¸å¯ç”¨ openAPI")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("p",[a("strong",[s._v("æ³¨æ„: æ¯ä¸€é¡¹é…ç½®éƒ½å¿…é¡»ç¬¦åˆè¦æ±‚ï¼Œè¯¦æƒ…è¯·å‚è€ƒåæ–‡çš„é…ç½®è¯´æ˜")])]),s._v(" "),a("h3",{attrs:{id:"ä¸‰ã€å¯åŠ¨-dal-æœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€å¯åŠ¨-dal-æœåŠ¡"}},[s._v("#")]),s._v(" ä¸‰ã€å¯åŠ¨ DAL æœåŠ¡")]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DAL")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@mrapi/dal'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" options "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DAL")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é»˜è®¤ipã€ç«¯å£å¯åŠ¨æœåŠ¡")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"å››ã€è®¿é—®æœåŠ¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€è®¿é—®æœåŠ¡"}},[s._v("#")]),s._v(" å››ã€è®¿é—®æœåŠ¡")]),s._v(" "),a("p",[s._v("å¥½äº†ï¼å¼€å§‹äº«å— DAL å¸¦æ¥çš„ä¾¿æ·å§")]),s._v(" "),a("div",{staticClass:"language-cmd line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ğŸš€ Server ready at: http://0.0.0.0:1358\n\nâ­ï¸ [one] Running a GraphQL API route at: /graphql/one\nâ­ï¸ [one] Running a openAPI route at: /api/one\nâ­ï¸ [one] Running a openAPI Swagger document at: /api/one/swagger\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("strong",[s._v("æ³¨æ„: å¦‚æœè®¿é—®æœªé…ç½® defaultTenant çš„ schema æ—¶ï¼Œéœ€è¦è®¾ç½®è¯·æ±‚çš„ tenantIdentity æ‰èƒ½å¤Ÿæ­£å¸¸è®¿é—®è¯·æ±‚ï¼")])]),s._v(" "),a("h2",{attrs:{id:"åŸºç¡€é…ç½®é¡¹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€é…ç½®é¡¹"}},[s._v("#")]),s._v(" åŸºç¡€é…ç½®é¡¹")]),s._v(" "),a("p",[s._v("å‚è€ƒ "),a("a",{attrs:{href:"https://mrapi-js.github.io/docs/zh/Configuration/DAL.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("DAL åŸºç¡€é…ç½®é¡¹"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"daloptions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#daloptions"}},[s._v("#")]),s._v(" DALOptions")]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" OptionsData "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'express-graphql'")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("openAPIOptions")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  dependencies"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Function")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  oasDir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v("\n  validateApiDoc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DALOption")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v("\n  nexusDir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v("\n  prismaClientDir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v("\n  defaultTenant"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v("\n    url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  graphql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    enable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),s._v("\n    options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" OptionsData\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  \n  openAPI"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" \n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        enable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n        options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" openAPIOptions\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        enable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n        options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" openAPIOptions\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("type")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DALOptions")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" DALOption"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br")])]),a("h3",{attrs:{id:"name"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#name"}},[s._v("#")]),s._v(" name")]),s._v(" "),a("p",[s._v("schema å”¯ä¸€æ ‡è¯†")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("å¿…å¡«")])]),s._v(" "),a("li",[a("p",[s._v("å‚æ•°ç±»å‹ï¼š"),a("code",[s._v("string")])])]),s._v(" "),a("li",[a("p",[s._v("å‚è€ƒå€¼ï¼šschema æ–‡ä»¶å")])])]),s._v(" "),a("h3",{attrs:{id:"defaulttenant"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#defaulttenant"}},[s._v("#")]),s._v(" defaultTenant")]),s._v(" "),a("p",[s._v("é»˜è®¤ç§Ÿæˆ·é…ç½®ä¿¡æ¯")]),s._v(" "),a("ul",[a("li",[s._v("å‚æ•°ç±»å‹ï¼š"),a("code",[s._v("object")])])]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é»˜è®¤ç§Ÿæˆ·æ ‡è¯†ï¼Œå¯¹åº”äº management è¡¨ä¸­çš„ db")]),s._v("\n  url"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é»˜è®¤ç§Ÿæˆ·çš„ db è¿æ¥åœ°å€")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("æ³¨æ„:\\ å½“ url å­˜åœ¨æ—¶ï¼Œname ä¸å†å¯¹åº” management è¡¨ä¸­çš„ db")])]),s._v(" "),a("h3",{attrs:{id:"prismaclientdir"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#prismaclientdir"}},[s._v("#")]),s._v(" prismaClientDir")]),s._v(" "),a("p",[a("code",[s._v("prisma client")]),s._v(" çš„ç›®å½•")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("å‚æ•°ç±»å‹ï¼š"),a("code",[s._v("string")])])]),s._v(" "),a("li",[a("p",[s._v("é»˜è®¤å€¼ï¼š"),a("code",[s._v("mrapiConfig.outputDir")])])])]),s._v(" "),a("p",[a("strong",[s._v("æ³¨æ„:\\ é€šè¿‡ mrapi/cli ç”Ÿæˆçš„ prisma client å¯ä»¥ç›´æ¥ä½¿ç”¨é»˜è®¤å€¼")])]),s._v(" "),a("h3",{attrs:{id:"nexusdir"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nexusdir"}},[s._v("#")]),s._v(" nexusDir")]),s._v(" "),a("p",[a("code",[s._v("nexus type")]),s._v(" çš„ç›®å½•")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("å‚æ•°ç±»å‹ï¼š"),a("code",[s._v("string")])])]),s._v(" "),a("li",[a("p",[s._v("é»˜è®¤å€¼ï¼š"),a("code",[s._v("path.join(mrapiConfig.outputDir, 'nexus-types')")])])])]),s._v(" "),a("p",[a("strong",[s._v("æ³¨æ„:\\ é€šè¿‡ mrapi/cli ç”Ÿæˆçš„ nexus type å¯ä»¥ç›´æ¥ä½¿ç”¨é»˜è®¤å€¼")])]),s._v(" "),a("h3",{attrs:{id:"graphql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#graphql"}},[s._v("#")]),s._v(" graphql")]),s._v(" "),a("p",[s._v("graphql æœåŠ¡é…ç½®ä¿¡æ¯")]),s._v(" "),a("ul",[a("li",[s._v("å‚æ•°ç±»å‹ï¼š"),a("code",[s._v("object")])])]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  enable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ˜¯å¦å¯ç”¨ graphql, é»˜è®¤å¯ç”¨")]),s._v("\n  options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" OptionsData "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å‚è€ƒ import { OptionsData } from 'express-graphql'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"openapi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#openapi"}},[s._v("#")]),s._v(" openAPI")]),s._v(" "),a("p",[s._v("openAPI æœåŠ¡é…ç½®ä¿¡æ¯")]),s._v(" "),a("ul",[a("li",[s._v("å‚æ•°ç±»å‹ï¼š"),a("code",[s._v("object")])])]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    enable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ˜¯å¦å¯ç”¨ openAPI, é»˜è®¤å¯ç”¨")]),s._v("\n    options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" openAPIOptions\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    enable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n    options"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" openAPIOptions\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nopenAPIOptions"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  dependencies"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// oas dependencies æ–¹æ³•æ‰©å±•")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Promise")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("Function")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  oasDir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// oas ç›®å½•")]),s._v("\n  validateApiDoc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("boolean")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ˜¯å¦æ ¡éªŒ oas æ–‡æ¡£")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h2",{attrs:{id:"api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[s._v("#")]),s._v(" API")]),s._v(" "),a("p",[s._v("å®ä¾‹åŒ–åå¯¹å¤–æä¾›çš„ API æ–¹æ³•")]),s._v(" "),a("h3",{attrs:{id:"getprisma-async-name-string-tenantname-string-prismaclient"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getprisma-async-name-string-tenantname-string-prismaclient"}},[s._v("#")]),s._v(" getPrisma = async (name: string, tenantName?: string) => prismaClient")]),s._v(" "),a("ul",[a("li",[s._v("å¼‚æ­¥æ–¹æ³•")])]),s._v(" "),a("p",[s._v("é€šè¿‡ schema æ ‡è¯† å’Œ tenant æ ‡è¯†ï¼Œè¿”å›å¯¹åº”çš„ "),a("code",[s._v("prisma client")]),s._v("ã€‚å½“ tenantName ä¸ºç©ºçš„æ—¶å€™ï¼Œå°†å°è¯•åœ¨é…ç½®ä¸­æ‰¾å‡ºé»˜è®¤å€¼è¿›è¡Œå¡«å……ã€‚")]),s._v(" "),a("h3",{attrs:{id:"hasschema-name-string-boolean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hasschema-name-string-boolean"}},[s._v("#")]),s._v(" hasSchema(name: string): boolean")]),s._v(" "),a("p",[s._v("schema æ ‡è¯†æ˜¯å¦å­˜åœ¨")]),s._v(" "),a("h3",{attrs:{id:"getschema-name-string-graphqlschema"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getschema-name-string-graphqlschema"}},[s._v("#")]),s._v(" getSchema(name: string): GraphQLSchema")]),s._v(" "),a("p",[s._v("è·å– @nexus/schema")]),s._v(" "),a("h3",{attrs:{id:"addschema-name-string-option-dalschemaoptions-boolean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#addschema-name-string-option-dalschemaoptions-boolean"}},[s._v("#")]),s._v(" addSchema(name: string, option: DALSchemaOptions = {}): boolean")]),s._v(" "),a("p",[s._v("æ·»åŠ  schema æ ‡è¯†ä¸º name çš„ "),a("code",[s._v("DALSchemaOptions")]),s._v(" é…ç½®ï¼Œè¿”å›å€¼å¯ç”¨äºåˆ¤æ–­æ·»åŠ æ˜¯å¦æˆåŠŸã€‚")]),s._v(" "),a("h3",{attrs:{id:"removeschema-name-string-boolean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#removeschema-name-string-boolean"}},[s._v("#")]),s._v(" removeSchema(name: string): boolean")]),s._v(" "),a("p",[s._v("ç§»é™¤ schema æ ‡è¯†ä¸º name çš„ç›¸å…³é…ç½®ï¼Œè¿”å›å€¼å¯ç”¨äºåˆ¤æ–­ç§»é™¤æ˜¯å¦æˆåŠŸã€‚")]),s._v(" "),a("h3",{attrs:{id:"async-start-serveroptions-serveroption"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#async-start-serveroptions-serveroption"}},[s._v("#")]),s._v(" async start(serverOptions?: ServerOption)")]),s._v(" "),a("ul",[a("li",[s._v("å¼‚æ­¥æ–¹æ³•")])]),s._v(" "),a("p",[s._v("å¯åŠ¨æœåŠ¡")]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServerOptions")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  host"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v("\n  port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("number")]),s._v("\n  tenantIdentity"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("string")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é»˜è®¤å–ç”¨ mrapi.config.js ä¸­çš„ tenantIdentity")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"async-stop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#async-stop"}},[s._v("#")]),s._v(" async stop()")]),s._v(" "),a("ul",[a("li",[s._v("å¼‚æ­¥æ–¹æ³•")])]),s._v(" "),a("p",[s._v("åœæ­¢æœåŠ¡")]),s._v(" "),a("h2",{attrs:{id:"å®ä¾‹å¯¹è±¡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å®ä¾‹å¯¹è±¡"}},[s._v("#")]),s._v(" å®ä¾‹å¯¹è±¡")]),s._v(" "),a("p",[s._v("å®ä¾‹åŒ–å¯¹è±¡çš„å±æ€§")]),s._v(" "),a("h3",{attrs:{id:"server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#server"}},[s._v("#")]),s._v(" server")]),s._v(" "),a("p",[s._v("DAL çš„ server å®ä¾‹å¯¹è±¡")]),s._v(" "),a("div",{staticClass:"language-ts line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[s._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("start")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" thisApp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("app "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®é™…ä¸º Express å®ä¾‹")]),s._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¯ä»¥é€šè¿‡ thisApp è°ƒç”¨ Express çš„èƒ½åŠ›")]),s._v("\n  thisApp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cors")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ³¨æ„ï¼šDAL ä¸­å·²å†…ç½® cors å’Œ body-parser æ’ä»¶ï¼Œè¿™é‡Œåªæ˜¯ç¤ºä¾‹")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("æ³¨æ„\\ï¼š ä»…åœ¨ "),a("code",[s._v("app.start()")]),s._v(" åå®ä¾‹åŒ–æ‰å­˜åœ¨ã€‚")])])])}),[],!1,null,null,null);t.default=e.exports}}]);